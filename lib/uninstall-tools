#!/usr/bin/env zsh

# Usage: uninstall-tools <type> [--reverse]
# Uninstalls all tools of the given type from tools.conf

BASE_DIR=$( cd $( dirname ${(%):-%x} ) &> /dev/null && pwd )
type=$1
reverse=$2

if [[ "$reverse" == "--reverse" ]]; then
    while read entry; do
        ${BASE_DIR}/uninstall-tool "$entry" </dev/null
    done < <(grep "^${type}:" ${BASE_DIR}/../tools.conf | tail -r)
else
    while read entry; do
        ${BASE_DIR}/uninstall-tool "$entry" </dev/null
    done < <(grep "^${type}:" ${BASE_DIR}/../tools.conf)
fi
